version: 2

sources:
  - name: ADO_GROUP1_DB_ANALYSIS
    database: ADO_GROUP1_DB_ANALYSIS
    schema: PUBLIC
    tables:
      - name: ACCOUNT
        description: "Account Table"
        columns:
          - name: ACCOUNTKEY
            description: "The primary key for Account table"
            tests:
              - unique
              - not_null
          - name: PARENTACCOUNTKEY
            description: "Foreign key referencing ACCOUNTKEY in the Account table"
            tests:
              - not_null
              - relationships:
                  to: ref('ACCOUNT')
                  field: "ACCOUNTKEY"
      - name: CHANNEL
        description: "Channel Table"
        columns:
          - name: CHANNELKEY
            description: "The primary key for the Channel table"
            tests:
              - unique
              - not_null
      - name: CURRENCY
        description: "Currency Table"
        columns:
          - name: CURRENCYKEY
            description: "The primary key for the Currency table"
            tests:
              - unique
              - not_null
      - name: CUSTOMER
        description: "Customer Table"
        columns:
          - name: CUSTOMERKEY
            description: "The primary key for the Customer table"
            tests:
              - unique
              - not_null
          - name: GEOGRAPHYKEY
            description: "Foreign key referencing GEOGRAPHYKEY in the Geography table"
            tests:
              - not_null
              - relationships:
                  to: ref('GEOGRAPHY')
                  field: "GEOGRAPHYKEY"
          - name: MARITALSTATUS
            description: "Marital status of customer"
            tests:
              - accepted_values:
                  values: ["M", "S", null]
          - name: GENDER
            description: "Gender of customer"
            tests:
              - accepted_values:
                  values: ["M", "F", null]
          - name: EMAILADDRESS
            description: "Email address of customer"
            tests:
              - unique
          - name: HOUSEOWNERFLAG
            description: "Whether the customer owns a house"
            tests:
              - accepted_values:
                  values: [0, 1, null]
                  quote: false
      - name: DATE
      - name: EMPLOYEE
      - name: ENTITY
      - name: EXCHANGERATE
      - name: GEOGRAPHY
      - name: INVENTORY
      - name: ITMACHINE
      - name: ITSLA
      - name: MACHINE
      - name: ONLINESALES
      - name: OUTAGE
      - name: PRODUCT
        description: "Product Table"
        columns:
          - name: PRODUCTKEY
            description: "The primary key for the Product table"
            tests:
              - unique
              - not_null
          - name: PRODUCTSUBCATEGORYKEY
            description: "Foreign key referencing PRODUCTSUBCATEGORYKEY in the ProductSubCategory table"
            tests:
              - not_null
              - relationships:
                  to: ref('PRODUCTSUBCATEGORY')
                  field: "PRODUCTSUBCATEGORYKEY"
          - name: WEIGHT
            description: "Weight of the product"
            tests:
              - dbt_utils.expression_is_true:
                  expression: "WEIGHT >= 0"
          - name: UNITCOST
            description: "Cost of a single unit of the product"
            tests:
              - not_null
              - dbt_utils.expression_is_true:
                  expression: "UNITCOST >= 0"
              - dbt_utils.expression_is_true:
                  expression: "UNITPRICE >= 0"
      - name: PRODUCTCATEGORY
        description: "ProductCategory Table"
        columns:
          - name: PRODUCTCATEGORYKEY
            description: "The primary key for the ProductCategory table"
            tests:
              - unique
              - not_null
      - name: PRODUCTSUBCATEGORY
        description: "ProductSubCategory Table"
        columns:
          - name: PRODUCTSUBCATEGORYKEY
            description: "The primary key for the ProductSubCategory table"
            tests:
              - unique
              - not_null
      - name: PROMOTION
        description: "Promotion Table"
        columns:
          - name: PROMOTIONKEY
            description: "The primary key for the Promotion table"
            tests:
              - unique
              - not_null
          - name: DISCOUNTPERCENT
            description: "Discount percentage for the promotion"
            tests:
              - not_null
              - dbt_utils.expression_is_true:
                  expression: "DISCOUNTPERCENT >= 0 AND DISCOUNTPERCENT <= 1"
      - name: SALES
      - name: SALESQUOTA
      - name: SALESTERRITORY
        description: "SalesTerritory Table"
        columns:
          - name: SALESTERRITORYKEY
            description: "The primary key for the SalesTerritory table"
            tests:
              - unique
              - not_null
          - name: GEOGRAPHYKEY
            description: "Foreign key referencing GEOGRAPHYKEY in the Geography table"
            tests:
              - not_null
              - relationships:
                  to: ref('GEOGRAPHY')
                  field: "GEOGRAPHYKEY"
          - name: SALESTERRITORYMANAGER
            description: "Foreign key referencing EMPLOYEEEKEY in the Employee table"
            tests:
              - not_null
              - relationships:
                  to: ref('EMPLOYEE')
                  field: "EMPLOYEEKEY"
      - name: SCENARIO
      - name: STORE
      - name: STRATEGYPLAN
